<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · YAXArraysToolbox.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://dpabon.github.io/YAXArraysToolbox.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>YAXArraysToolbox.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/dpabon/YAXArraysToolbox.jl/blob/main/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="YAXArraysToolbox"><a class="docs-heading-anchor" href="#YAXArraysToolbox">YAXArraysToolbox</a><a id="YAXArraysToolbox-1"></a><a class="docs-heading-anchor-permalink" href="#YAXArraysToolbox" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/dpabon/YAXArraysToolbox.jl">YAXArraysToolbox</a>.</p><ul><li><a href="#YAXArraysToolbox.aggregate_time-Tuple{Any}"><code>YAXArraysToolbox.aggregate_time</code></a></li><li><a href="#YAXArraysToolbox.altitude_mask_results_proc-Tuple{Any}"><code>YAXArraysToolbox.altitude_mask_results_proc</code></a></li><li><a href="#YAXArraysToolbox.altitude_masking_proc-Tuple{Any, Any}"><code>YAXArraysToolbox.altitude_masking_proc</code></a></li><li><a href="#YAXArraysToolbox.masking_proc-Tuple{YAXArrays.Cubes.YAXArray}"><code>YAXArraysToolbox.masking_proc</code></a></li><li><a href="#YAXArraysToolbox.s4time-NTuple{6, Any}"><code>YAXArraysToolbox.s4time</code></a></li><li><a href="#YAXArraysToolbox.space4time_proc-Tuple{Any, Any}"><code>YAXArraysToolbox.space4time_proc</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="YAXArraysToolbox.aggregate_time-Tuple{Any}" href="#YAXArraysToolbox.aggregate_time-Tuple{Any}"><code>YAXArraysToolbox.aggregate_time</code></a> — <span class="docstring-category">Method</span></header><section><div><p><strong>Aggregate by time</strong></p><p><strong>Arguments:</strong></p><ul><li><code>cube_in</code> YAXArray Cube.</li><li><code>time_axis</code>: String. Name of the time axis.</li><li><code>new_resolution</code>: String. New temporal resolution can be <code>&quot;day&quot;</code>, <code>&quot;month&quot;</code>, <code>&quot;year&quot;</code>.</li><li><code>new_time_step</code>: Int64. Time step to be computed in the new time series. e.g. <code>new_resolution=&quot;day&quot;, new_time_step=8</code> will compute the function each 8 days. The new time dimension will only contain the days corresponding to the 8th day.</li><li><code>fun</code>: String. Function to be applied to aggregate the time. It can be &quot;median&quot;, &quot;mean&quot;, &quot;std&quot;, &quot;var&quot;, &quot;sum&quot;, &quot;quant&quot;, &quot;min&quot;, &quot;max&quot;.</li><li><code>p</code>: Float64 in the interval [0,1]. If <code>fun=quant</code> p is the value of the quantile. </li><li><code>skipMissing</code>: Boolean. Skip missing values when aggregating the data. If all values are missing, NaN is returned.</li><li><code>skipnan</code>: Boolean. Skip NaN values when aggregating the data. If all values are NaN, NaN is returned.</li><li><code>showprog</code>: Boolean. Progress Bar.</li><li><code>max_cache</code>: String. Maximum cache to read the data. It must be in MB e.g. &quot;100MB&quot; or in GB &quot;10GB&quot;.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpabon/YAXArraysToolbox.jl/blob/4d2bb66932b059e2ad53a020a7f1612406414fb2/src/aggregate_time.jl#L382-L401">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="YAXArraysToolbox.altitude_mask_results_proc-Tuple{Any}" href="#YAXArraysToolbox.altitude_mask_results_proc-Tuple{Any}"><code>YAXArraysToolbox.altitude_mask_results_proc</code></a> — <span class="docstring-category">Method</span></header><section><div><p><strong>Topographical variability processor</strong></p><p><strong>Arguments:</strong></p><ul><li><p><code>cube_in_altitude</code> : Altitude YAXARRAY with two variables mean, and sd.</p></li><li><p><code>lon_axis_name</code> : String. Name of the longitude axis on the input cubes. By default <code>lon_axis_name = &quot;lon&quot;</code></p></li><li><p><code>lat_axis_name</code> :  String. Name of the longitude axis on the input cubes. By default <code>lon_axis_name = &quot;lat&quot;</code></p></li><li><p><code>variable_name</code> : String. Name of the Variable containing the variables &quot;mean&quot;, and &quot;sd&quot;.</p></li><li><p><code>winsize</code>: Edge size of the moving window on pixels. By default winsize = 5. E.g. <code>winsize = 5</code> will produce a moving window with 5^2 pixels.</p></li><li><p><code>showprog</code>: Show progress bar. By default <code>showprog = true</code></p></li></ul><p><strong>Output:</strong></p><p>The Topographical variability processor produces a YAXARRAY.cube with three Indicators:</p><ul><li><code>v1</code>: <span>$v_{1}=\dfrac{1}{n}\sum_{i = 1}^{n}\sigma_{h,i}$</span></li></ul><p>High values of <span>$v_{1}$</span> indicate hilly terrain over the considered scale, which should be discarded from the analysis.</p><ul><li><code>v2</code>: <span>$v_{2}=\vert \mu_{h} - \dfrac{1}{n} \sum_{i = 1}^{n}\mu_{h,i} \vert$</span></li></ul><p><span>$v_{2}$</span> indicates how different the mean elevation within the central pixel is from the average elevation in the local window.</p><ul><li><code>v3</code>: <span>$v_{3}= \vert \sigma_{h} - \dfrac{1}{n}\sum_{i = 1}^{n}\sigma_{h,i} \vert$</span></li></ul><p><span>$v_{3}$</span>: compares the central pixel&#39;s standard deviation of elevation with the standard deviation across the moving window.</p><p><strong>See also:</strong></p><ul><li><code>altitude_masking_proc</code> TO ADD LINK!!</li></ul><p><strong>Bibliography:</strong></p><ul><li>Duveiller, G., Hooker, J., &amp; Cescatti, A. (2018). A dataset mapping the potential biophysical effects of vegetation cover change. Scientific Data, 5(1), Article 1. <a href="https://doi.org/10.1038/sdata.2018.14">https://doi.org/10.1038/sdata.2018.14</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpabon/YAXArraysToolbox.jl/blob/4d2bb66932b059e2ad53a020a7f1612406414fb2/src/masking_altitude.jl#L37-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="YAXArraysToolbox.altitude_masking_proc-Tuple{Any, Any}" href="#YAXArraysToolbox.altitude_masking_proc-Tuple{Any, Any}"><code>YAXArraysToolbox.altitude_masking_proc</code></a> — <span class="docstring-category">Method</span></header><section><div><p><strong>Topographical masking processor</strong></p><p><strong>Arguments:</strong></p><ul><li><p><code>cube_in_to_mask</code>: YAXArray Cube to be masked.</p></li><li><p><code>cube_in_altitude</code> : Altitude YAXARRAY with two variables mean, and sd.</p></li><li><p><code>lon_axis_name</code> : String. Name of the longitude axis on the input cubes. By default <code>lon_axis_name = &quot;lon&quot;</code></p></li><li><p><code>lat_axis_name</code> :  String. Name of the longitude axis on the input cubes. By default <code>lon_axis_name = &quot;lat&quot;</code></p></li><li><p><code>variable_name</code> : String. Name of the Variable containing the variables &quot;mean&quot;, and &quot;sd&quot;.</p></li><li><p><code>time_axis_name</code> : String or NaN. It is strongly recommended to pass this parameter if the cube to be masked contains a time dimension, otherwise <code>nothing</code>.</p></li><li><p><code>winsize</code>: Edge size of the moving window on pixels. By default <code>winsize = 5</code>. E.g. <code>winsize = 5</code> will produce a moving window with 5^2 pixels.</p></li><li><p><code>v1_thr</code> : Float. Threshold to mask values using <span>$v_{1}$</span> indicator. All values higer or equal to <code>v1_thr</code> are set to NaN. By default <code>v1_thr = 50</code> </p></li><li><p><code>v2_thr</code> : Float. Threshold to mask values using <span>$v_{2}$</span> indicator. All values higer or equal to <code>v2_thr</code> are set to NaN. By detault <code>v2_thr = 100</code></p></li><li><p><code>v3_thr</code> : Float. Threshold to mask values using <span>$v_{3}$</span> indicator. All values higer or equal to <code>v3</code> are set to NaN. By default <code>v3_thr = 100</code></p></li><li><p><code>showprog</code>: Boolean. Show progress bar. By default <code>showprog = true</code>.</p></li></ul><p><strong>Output:</strong></p><ul><li>YAXArray Datase with two variables:<ul><li><code>cube masked</code>: YAXArray Cube with same dimensions as <code>cube_in_to_mask</code>.</li><li><code>masked_pixels</code>: YAXArray Cube with same lat, lon, dimensions as cube_masked but with a single boolean variable indicating if the pixel was masked or not.</li></ul></li></ul><p><strong>Topographical variability indicators</strong></p><ul><li><code>v1</code>: <span>$v_{1}=\dfrac{1}{n}\sum_{i = 1}^{n}\sigma_{h,i}$</span></li></ul><p>High values of <span>$v_{1}$</span> indicate hilly terrain over the considered scale, which should be discarded from the analysis.</p><ul><li><code>v2</code>: <span>$v_{2}=\vert \mu_{h} - \dfrac{1}{n} \sum_{i = 1}^{n}\mu_{h,i} \vert$</span></li></ul><p><span>$v_{2}$</span> indicates how different the mean elevation within the central pixel is from the average elevation in the local window.</p><ul><li><code>v3</code>: <span>$v_{3}= \vert \sigma_{h} - \dfrac{1}{n}\sum_{i = 1}^{n}\sigma_{h,i} \vert$</span></li></ul><p><span>$v_{3}$</span>: compares the central pixel&#39;s standard deviation of elevation with the standard deviation across the moving window.</p><p><strong>See also</strong></p><ul><li><code>altitude_mask_results_proc</code> function TO ADD LINK!!</li></ul><p><strong>Bibliography</strong></p><ul><li>Duveiller, G., Hooker, J., &amp; Cescatti, A. (2018). A dataset mapping the potential biophysical effects of vegetation cover change. Scientific Data, 5(1), Article 1. <a href="https://doi.org/10.1038/sdata.2018.14">https://doi.org/10.1038/sdata.2018.14</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpabon/YAXArraysToolbox.jl/blob/4d2bb66932b059e2ad53a020a7f1612406414fb2/src/masking_altitude.jl#L134-L184">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="YAXArraysToolbox.masking_proc-Tuple{YAXArrays.Cubes.YAXArray}" href="#YAXArraysToolbox.masking_proc-Tuple{YAXArrays.Cubes.YAXArray}"><code>YAXArraysToolbox.masking_proc</code></a> — <span class="docstring-category">Method</span></header><section><div><p><strong>Masking processor</strong></p><p><strong>Arguments:</strong></p><ul><li><p><code>cube_in_to_mask</code>: YAXArray cube to be masked.</p></li><li><p><code>cube_rsquare</code>: Nothing, or YAXArray cube with the <span>$R^{2}$</span> variable. If set to <code>nothing</code> no mask is applied</p></li><li><p><code>rsquare_thr</code>: Float64. <span>$R^{2}$</span> threshold. All values lower than <code>rsquare_thr</code> are set to <code>NaN</code></p></li><li><p><code>cube_co_occurrence</code>: Nothing, or YAXArray cube with the co-occurrence variable. If set to <code>nothing</code> no mask is applied.</p></li><li><p><code>co_occurence_thr</code>: Float64. Co-occurence threshold. All values lower than <code>co_occurence_thr</code> are set to <code>NaN</code></p></li><li><p><code>cube_delta</code>: Nothing, or YAXArray cube with delta variable. If set to <code>nothing</code> no mask is applied.</p></li><li><p><code>minmax_delta</code>: Tuple. Minimum and maximum thresholds of delta variable. Values lower and higher than the thresholds are set to <code>NaN</code>. It is also possible to set any of the thresholds as <code>nothing</code> e.g. <code>(-1, nothing)</code> or <code>(nothing, 1)</code> in these cases only one threshold is applied.</p></li><li><p><code>time_dim</code>: Nothing, or String. Name of the time dimension. This dimensions needs to be present in all the cubes. If set to <code>nothing</code> no time dimension considered (It can result in slower computation time!). By default <code>time_dim = time</code></p></li><li><p><code>showprog</code>: Boolean. Show progress bar. By default <code>showprog = true</code></p></li></ul><p><strong>Output:</strong></p><ul><li>YAXArray cube masked.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpabon/YAXArraysToolbox.jl/blob/4d2bb66932b059e2ad53a020a7f1612406414fb2/src/masking_general.jl#L95-L120">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="YAXArraysToolbox.s4time-NTuple{6, Any}" href="#YAXArraysToolbox.s4time-NTuple{6, Any}"><code>YAXArraysToolbox.s4time</code></a> — <span class="docstring-category">Method</span></header><section><div><p>space4time(climate<em>cube, pfts</em>cube, pft_list::Vector{String}, winsize = 5, minpxl = 100, minDiffPxlspercentage = 40)</p><p>Compute the space for time analysis for a given climate variable.     ...</p><p><strong>Arguments</strong></p><pre><code class="nohighlight hljs">climate_cube: YAXARRAY cube with dimenssions: lon, lat, time.
pfts_cube: YAXARRAY cube with dimenssions: pfts, lat,lon, time.
...</code></pre><p><strong>Output</strong></p><pre><code class="nohighlight hljs">Three output cubes are generated.
out1: Summary statistics. YAXARRAY cube where summary_stat axis contains: 
* &quot;rsquare&quot;: XXXX 
* &quot;cumulative_variance&quot;: XXXX
* &quot;predicted&quot;: Prediction of Z for the central pixel with its real PFT combination.
out2:</code></pre><p>#Examples</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpabon/YAXArraysToolbox.jl/blob/4d2bb66932b059e2ad53a020a7f1612406414fb2/src/space4time.jl#L83-L104">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="YAXArraysToolbox.space4time_proc-Tuple{Any, Any}" href="#YAXArraysToolbox.space4time_proc-Tuple{Any, Any}"><code>YAXArraysToolbox.space4time_proc</code></a> — <span class="docstring-category">Method</span></header><section><div><p><strong>Space for time processor</strong></p><p><strong>Arguments:</strong></p><ul><li><code>cube_con</code> : YAXARRAY with the continous variable to be analyized.</li></ul><ul><li><code>cube_classes</code>: YAXARRAY with the discrete classes to be used in the space4time.</li></ul><ul><li><code>time_axis_name</code> : String or nothing. Name of the time axis on the input cubes. By default <code>time_axis_name = &quot;time&quot;</code>. if <code>time_axis_name = nothing</code>, not time dimension considered.</li></ul><ul><li><code>lon_axis_name</code> : String. Name of the longitude axis on the input cubes. By default <code>lon_axis_name = &quot;lon&quot;</code></li></ul><ul><li><code>lat_axis_name</code> :  String. Name of the longitude axis on the input cubes. By default <code>lon_axis_name = &quot;lat&quot;</code></li></ul><ul><li><code>classes_var_name</code> : String. Name of the Variable containing the discrete classes. By default <code>classes_var_name = &quot;classes&quot;</code>.</li></ul><ul><li><code>winsize</code>: Edge size of the moving window on pixels. By default winsize = 5. E.g. <code>winsize = 5</code> will produce a moving window with 5^2 pixels.</li></ul><ul><li><code>minpxl</code> : Minimum number of pixels in the moving window. By default minpxl = 25. Change accordindly to your <code>winsize</code> parameter.</li></ul><ul><li><code>minDiffPxlspercentage</code>: Percentage of minimum number pixels in the moving window that must have different compositions. Must be any value in the interval 30-100. By default minDiffPxlspercentage = 40</li></ul><ul><li><p><code>classes_vec</code>: A string vector with the names of the classes on <code>cube_classes</code> to be used. e.g. from MPI-BGC internal structure <code>classes_vec = [&quot;Evergreen_Needleleaf_Forests&quot;, &quot;Evergreen_Broadleaf_Forests&quot;, &quot;Deciduous_Needleleaf_Forests&quot;, &quot;Deciduous_Broadleaf_Forests&quot;, &quot;Mixed_Forests&quot;, &quot;Closed_Shrublands&quot;, &quot;Open_Shrublands&quot;, &quot;Woody_Savannas&quot;, &quot;Savannas&quot;, &quot;Grasslands&quot;, &quot;Permanent_Wetlands&quot;, &quot;Croplands&quot;, &quot;Urban_and_Built-up_Lands&quot;, &quot;Cropland/Natural_Vegetation_Mosaics&quot;, &quot;Permanent_Snow_and_Ice&quot;, &quot;Barren&quot;, &quot;Water_Bodies&quot;]</code></p></li><li><p><code>max_value</code>: Indicates if the scale of the presence of the discrete classes if from 0 to 1 or 0 to 100 if <code>max_value = 100</code> then the data is re-scaled from 0 to 1. By default <code>max_value = 1</code></p></li><li><p><code>showprog</code>: Show progress bar. By default <code>showprog = true</code></p></li><li><p><code>max_cache</code>: Size of the cache to allocate temporarily sections of the cubes. By default <code>max_cache = 1e8</code></p></li></ul><p><strong>Output:</strong></p><p>The <code>space4time_proc</code> produces a YAXARRAY.Dataset with three cubes:</p><ul><li>SummaryStats cube has one axis <code>summary_stat</code>, and three variables:<ul><li><code>rsquared</code>:  </li><li><code>cumulative_variance</code>:</li><li><code>predicted</code>:</li></ul></li><li><code>metrics_for_classes</code> cube has one axis <code>Values of Z for pure classes</code>, and two variables:<ul><li><code>estimated</code>:</li><li><code>estimated_error</code>:</li></ul></li><li>metrics<em>for</em>transitions has two axis <code>transitions</code> (all the transitions by pairs between the different classes), and <code>Differences</code> with three variables:<ul><li><code>delta</code>:</li><li><code>delta_error</code>:</li><li><code>coocurence</code>:</li></ul></li></ul><pre><code class="nohighlight hljs"></code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dpabon/YAXArraysToolbox.jl/blob/4d2bb66932b059e2ad53a020a7f1612406414fb2/src/space4time.jl#L533-L576">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Wednesday 24 May 2023 07:23">Wednesday 24 May 2023</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
